# MacOSでgulpを動かせるようになるまで

Sassを使ったCSS記述の効率化や圧縮、JavaScriptファイルのES6での記述と圧縮、ブラウザでのリアルタイムプレビュー等をタスクランナーgulp.js(ガルプ)を使って実現します。

gulpをインストールした際にすぐ使いたいタスクとテンプレートファイルをgithubに公開しました。拙いβ版ですが自由に使ってもらえるといいかなと思います。

* [template_1.0.0 / github](https://github.com/uto-usui/template_1.0.0)



## gulpはデザイナーにも必要なタスクランナーに

フロントエンドではそういった**web制作に必要な処理を自動化するツールを総称して「タスクランナー」や「ビルドシステム」と呼んで**います。それを使って時短を図ろう、というのが昨今のフロントエンド事情で、その中でも勢いがあるのがgulpで、デザイナーにもそれを扱うスキルを求められているのかなあという空気感を感じています。

gulpの特徴はというと、

* 必要な処理を行うためのモジュール(プラグイン)をインストールしてnpmで管理
* 処理内容をJavaScriptで記述
* タスクとしてまとめた処理を非同期(並列)で高速に処理

検索すると「導入は簡単○」という記事をよく見かけるのですが、実際は環境によるところもあり、デザイナーが誰でもできるというレベルのものではないのかなあ、という印象です。
なので、煮詰まった部分や情報がなくて困ったところなどをまとめておきます。

環境はMacOSでターミナルでの作業になります。ターミナル初心者の方は戸惑うと思いますが、わからないエラーとか、何のこっちゃに陥った時は、**google翻訳にエラー内容をコピペすると大体の内容を把握できる**ので、それを元に解決するなりググるなりすれば問題ないかと思います。





## gulpのインストールの準備

gulpをインストールする前に、処理のために必要なものをインストールしていきます。インストールの際に、パスワードを求められますが、システム(PCにログインするときの)パスワードを入力します。


### ターミナルの起動

「アプリケーション / ユーティリティ / ターミナル.app 」
上記ディレクトリをたどってターミナルを起動します。


### Ruvyのインストールの確認

MacにはデフォルトでRuvyがインストールされていますが、一応確認します。

```
ruby -v
```

### Sassのインストール

「SCSS >>> CSS」といったようにコンパイルしたいので、sassをインストールしておきます。

```
sudo gem install sass
```


### gemをアップデートする

```
sudo gem update --system
```


### Sassをアップデート

```
sudo gem update sass
```


### Command Line Developer Toolsをインストール

El Capitan環境で、次に行いたいcompassのインストールができないことがありました。これはcompassをインストールする場所をMacがガードしてるらしく、「そこに変更加えても大丈夫なようなわたしは開発者ですけどね」というのを伝えるべくCommand Line Developer Toolsというものをインストールします。

```
sudo xcode-select --install
```

#### ライセンスに同意

```
sudo xcodebuild -license
```


### compassをインストール

sassのコンパイル時にcompassを利用すると何かと便利(いろいろ関数とかもらえる)なのです。

```
sudo gem install -n /usr/local/bin compass
```

### Node.jsをインストール

gulpにはnode.jsが必須なので、インストールします。node.jsをインストールすると、npmコマンドが使えるようになります。

* [node.js バージョン6.9.2 (2016/12/10)](http://nodejs.org/)

以下のコードでバージョンが表示されたらインストールは完了です。

```
npm -v
```




## gulpのインストール


### プロジェクトにファイルを設置

gulpのインストールに必要な関連ファイルをディレクトリに設置します。

* .babelrc
* config.rb
* gulpfile.babel.js
* package.json
* [△ここから上記ファイルを参照します](https://github.com/uto-usui/template_1.0.0)


### gulpをグローバルにインストール

どの場所にいてもgulpコマンドが使えるようにgulpをグローバルインストールします。

```
sudo npm install -g gulp-cli
```

### gulpと関連ファイルをpackage.jsonをnpmで参照してインストール

gulpをインストールしたいディレクトリに移動します。

```
cd your/directry/name
```

`cd` とディレクトリを入力すると、ターミナルで、そのディレクトリの階層へ移動することができます。階層を確認するには`ls`を入力します。

```
ls
```

プロジェクトのディレクトリに移動したら、npmを利用してpacage.jsonに記述した内容をインストールします。

```
sudo npm install
```


## gulpの実行

* [タスク実行用のファイル](https://github.com/uto-usui/template_1.0.0)

`gulp`とコマンド入力すると、`default`として登録されているタスクが実行されます。

```
gulp
```

上記ファイルを実行すると、ブラウザが立ち上がり、ejs / scss / jsファイルの変更を補足してscrからdistディレクトリにコンパイルします。






## その他コマンド



### モジュールのインストール

```
npm install --save-dev モジュール名
```

### モジュールのアンインストール

```
npm uninstall --save-dev モジュール名
```

### モジュール一覧の確認

```
npm list --depth=0
```

### npmのアップデート

```
sudo npm update -g
```





