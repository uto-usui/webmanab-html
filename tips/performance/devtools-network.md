# Network パネルでの調査 Research of network processing

ネットワーク処理で取得したリソースは DevTools の Network パネルでわかりやすく可視化できます。ここでは、ネットワーク処理の発生したリソースがリスト化されます。HTML の返却、CSS や JavaScript、画像ファイルなどのサブリソースのリクエスト、XMLHttpRequest や WebSocket の通信処理も表示されます。

## 基本的な使い方

### ボトルネックになっている処理

ボトルネックになっている処理を探す場合は、**Size カラムで大きなリソースを探したり、Time カラムで時間がかかっている処理をピックアップ**したりします。

またネットワーク処理にかかった時間は、Waterfall カラムにそれぞれ棒グラフでグラフィカルに表示されます。グラフが長いものほどボトルネックになっている可能性があります。リクエストの開始から転送の完了までのステップごとに要している時間を色分けして表示されます。

### 依存関係を調べる

リソースの依存関係を知りたいときは、リストのセルにホバーしながら shift を押すと、そのリソースを**取得するきっかけになったリソース（親）が緑色**に、そのリソースの**取得したリソース（子）が赤色**でリスト上にハイライトされます。

### フィルタリング

フィルタアイコンをクリックするとメニューが表示され、js や xhr 通信やフォントなど、リソースの種類によってフィルタリングできます。

### 一連の読み込みが完了したら

発生したリクエスト数の合計と受信したデータの合計が、最下部の左にフィルタリングしている項目と連動して表示されています。

その隣に DOMContentLoaded / load イベントの発生した時間が表示されます。Waterfall においては、青と赤の線で表示されています。

DOMContentLoaded は DOM ツリーの構築完了、load はサブリソースの取得と評価の完了を意味しています。この完了間隔が長いと、サブリソースが多過ぎたりスクリプトがブロッキングしているなど、表示を遅らせている要あると予想できます。

## リクエストの詳細を調べる

リストをクリックするとパネルが表示され、さらに詳しい情報にアクセスできます。

headers
: 対象リクエストの基本情報、リクエストヘッダ、レスポンスヘッダ、クエリパラメータを確認できます。

preview
: リソースのプレビューを確認できます。テキストであればテキスト、JSON であればパースされた状態で表示され、画像などであればプレビューと、縦横サイズや MIME type なども確認できます。

response
: リソースのパースされていない生データ

Cookies
: リクエストとそのレスポンスに付与された Cookie

Timing
: リクエストしてからダウンロードが完了するまでの各プロセスにかかった時間。Resource Timing API で同様のデータを得ることができます。 Waterfall カラムでホバーしていると、このデータが表示されます。

stalled
: プロキシのネゴシエーションを含んだ、TCP の接続制限による接続待ちなどによって発生するリクエスト開始までの時間

Proxy Negotiation
: プロキシサーバとの接続確立までの時間

DNS Lookup
: 新しいドメインへの DNS ルックアップに使った時間

Initial Connection
: SSL/TLS や TCP のネゴシエーションを含めた初期接続確立までの時間

SSL
: SSL/TLS のハンドシェイクに使った時間

Request sent
: リクエストの送信に使った時間

Waiting（TTFB - Time To First Byte）
: リクエストを送信してからレスポンスの最初の 1 バイトがブラウザに到達するまでの時間。時間が長いものほど、サーバがリクエストを受け取ってからレスポンスを返すまでに時間がかかっている

Content Download
: サーバからのレスポンスデータを受信するのに使った時間
