# Performance score indicator

アプリの性質やビジネスのフェーズによって改善の方向性が大きく変わります。改善のためには、パフォーマンス指標をよく理解して状況に応じて適切な指標を選び分析することが大切です。

## 表示速度に対する間接的な指標

以前から使われている基本的な指標は、ページロードの速度を直接的には表現できませんが、参考として改善できれば効果を見込めます。

### ページロードに関わるブラウザイベント

ページロードには、HTML ドキュメントのロード完了（DOMContentLoaded）と、サブリソースのダウンロードと評価も含めたページロード完了（load）の 2 つのイベントがあります。ナビゲーションを開始してから、このイベントが発生する時間はこれまで指標の 1 つとされてきました。

DOMContentLoaded イベントはブラウザによる HTML ドキュメントのロード完了を意味しますが、途中で発生する CSS や画像のようなサブリソースのロードを待ちません。

これに対し load イベントはページを構成するすべての要素がそろったことを意味します。ページのレンダリング開始はリソースがいかに早くそろうかが左右します。load イベントは Web サイトのネットワーク性能を表す大まかな指標として、DOMContentLoaded イベントとの差分はサブリソースによって発生するオーバーヘッドとしてとらえます。

### リクエスト数とファイルサイズ

リクエスト数とファイルサイズの大小が Web ページのロードに影響しますが、具体的には DOMContentLoaded から load イベントまでの時間に作用する要因です。最適化の初期段階として、リクエスト数とファイルサイズの削減、次にビジュアル上の表示速度と連動した指標を実測値として観察していくのがベターです。

## ユーザー体験に基づいた表示速度の指標

ページロードの速度は、ナビゲーションの開始からスクリーンにビジュアルが表示されて操作可能になるまでの所要時間としてとらえられます。ブラウザイベントやリクエスト数、ファイルサイズといった従来の指標ではビジュアルの表示量など、UX に基づく表示速度をとらえられませんでしたが、今ではそれを表現する指標があります。

それはあらゆるページロードの構成要素の包括的な最適化が要求されます。より直接的な UX 指標として認識し、最適化に取り組んでいきましょう。これらは Google dev tool で audits を実行したときなどにパフォーマンス指標として表現される項目でもあります。

## First Paint - ページが表示され始めたとき

First Paint はナビゲーションの開始（白い画面の状態）から Web ページの何らかが表示され始めたタイミングを指します。たとえば、背景色の表示が始まった時点で First Paint になり得るでしょう。ユーザー体験と直結し得るビジュアル上の表示速度に基づいた指標として代表的なものです。

## First Contentful Paint - コンテンツが表示され始めたとき

ナビゲーションの開始から Web ページのコンテンツが表示され始めたタイミング。First Paint と似ているが、First Paint がとにかくなにか表示があれば成立するのに対して、First Contentful Paint は画像やテキストなど、コンテンツになり得る要素の表示を指します。

## First Meaningful Paint - ユーザーに意味のある表示になったとき

あいまいな指標で、Web ページがユーザーにとって意味のある（役に立つ）表示になったタイミングを指します。

## Time To Interactive - ユーザーの操作に応答できるようになったとき

Web ページの表示を終えてユーザーの入力に対して確実に応答できるタイミング。SPA など JS の初期化や API のやりとりに時間がかかる場合、ビジュアル上表示できていても、ユーザーが操作可能になるまでに時間を必要とすることがあります。

## Speed Index - Above the Fold のスコア

Above the fold（ATF）は、スクロールせずに閲覧可能な画面領域の描画の指標。ページロード経過時間（x）に対する、コンテンツのレンダリング量（y）のグラフが、その X 軸との間に描く図形の面積の多い方が優れています。経過時間に応じたコンテンツレンダリング量を、スクリーンキャプチャなどから得てスコアを算出します。
